<section id="contactame">
    <h2>Dime tus intereses...</h2>
    <form action="/netlify/functions/sendToTelegram" method="POST">
        <div class="inputs-areas">
            <div class="contact-info">
                <div class="container">
                    <input
                        type="text"
                        id="name"
                        name="nombre"
                        placeholder="nombre"
                        required
                    />
                </div>
                <div class="container">
                    <input
                        type="email"
                        id="email"
                        name="email"
                        placeholder="correo"
                        required
                    />
                </div>

                <div class="container">
                    <input
                        type="tel"
                        id="telefono"
                        name="telefono"
                        placeholder="tel√©fono"
                        required
                    />
                </div>
            </div>

            <div class="mensaje">
                <textarea
                    id="message"
                    name="mensaje"
                    placeholder="mensaje"
                    required></textarea>
            </div>
        </div>

        <button type="submit">Enviar</button>
    </form>

    <div class="mensaje-enviado">
        <p>
            ¬°Mensaje enviado con √©xito! 
            <br> 
            Te contactaremos pronto. 
            <br>
            üòÅ
        
        </p>
    </div>

</section>
<style>
    #contactme {
        padding: 4rem;
    }
    h2 {
        text-align: center;
        font-size: 2rem;
        margin: 2rem 0;
    }
    form {
        margin: 0 auto;
        width: 40%;
    }
    .inputs-areas {
        padding: 1rem;
        display: flex;
        flex-direction: column;
        gap: 20px;
        /* background-color: red; */
    }
    .contact-info {
        display: flex;
        flex-direction: column;
        width: 100%;
        /* background-color: blue; */
        height: 100%;
    }
    input {
        height: 2rem;
    }
    .mensaje {
        display: flex;
        flex-direction: column;
        width: 100%;
        /* background-color: green; */
    }
    textarea {
        font-family: "Roboto";
        resize: none;
        padding: 0.5rem;
        border: 1px solid #ccc;
        border-radius: 4px;
        height: 5rem;
        margin: 0 1rem;
    }
    textarea,
    input {
        background-color: #323232;
        border-radius: 10px;
        padding: 0.7rem;
        border: 1px solid;
        color: #dadada;
    }
    .container {
        display: flex;
        flex-direction: column;
        margin: 0.2rem 1rem;
    }
    button {
        display: block;
        margin: 1.2rem auto 1.2rem auto;
        padding: 0.7rem 2rem;
        width: 50%;
        background-color: #1cf;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 1.1rem;
        transition: 150ms;
    }
    button:hover {
        background-color: #1b4654;
    }
    .mensaje-enviado {
        display: none;
        margin: 1rem auto;
        width: 14rem;
        text-align: center;


        padding: 1rem;
        background-color: #323232;
        border-radius: 5px;
    }
    @media(width < 750px) {
        form {
            width: 100%;
        }
    }
</style>
<script>
    document
        .querySelector("form")!
        .addEventListener("submit", async function (e) {
            e.preventDefault();

            const nombre = document.getElementById("name");
            const email = document.getElementById("email");
            const telefono = document.getElementById("telefono");
            const mensaje = document.getElementById("message");

            const formData = {
                nombre: nombre && "value" in nombre ? nombre.value : "",
                email: email && "value" in email ? email.value : "",
                telefono: telefono && "value" in telefono ? telefono.value : "",
                mensaje: mensaje && "value" in mensaje ? mensaje.value : "",
            };

            const res = await fetch("/.netlify/functions/sendToTelegram", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(formData),
            });

            if (res.ok) {
                document.querySelector(".mensaje-enviado")?.setAttribute("style", "display: block;");
            } else {
                alert("Hubo un error ‚ùå");
            }
        });
</script>
